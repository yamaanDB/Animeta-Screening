"use strict";(self.webpackChunkBoston_Living=self.webpackChunkBoston_Living||[]).push([[2940],{32940:function(e,t,r){r.r(t);var n=r(4942),o=r(1413),a=r(45987),l=r(29439),i=r(72791),c=r(62591),u=r(61134),d=r(9266),s=r(15945),v=r(58288),y=r(68550),f=r(71632),h=r(80184),p=["control","formState","setValue","register","trigger","handleSubmit","watch"],S=(0,i.forwardRef)((function(e,t){var r,S,m,b=e.tabValue,k=e.activeTabLabel,Z=e.commonSelectAll,L=e.setCommonSelectAll,x=e.data,w=void 0===x?[]:x,C=e.frequencyList,A=void 0===C?[]:C,E=e.triggerAppend,T=e.setTriggerAppend,I=e.checkboxdata,j=void 0===I?[]:I,N=e.handleDeleteArray,R=e.setFrequencyList,q=e.saveDraft,V=(e.selectedFrequency,e.filterUpdate,e.setShowWarning,e.setIsDirty),D=e.showPreview,_=(0,i.useRef)([]),B=(0,i.useState)(null),F=(0,l.Z)(B,2),P=F[0],M=F[1],O=(0,i.useState)(j),U=(0,l.Z)(O,2),Y=U[0],z=U[1],G=(0,u.cI)({defaultValues:{form:w},mode:"onChange"}),Q=G.control,W=G.formState,H=W.errors,J=W.isDirty,K=G.setValue,X=G.register,$=G.trigger,ee=G.handleSubmit,te=G.watch,re=(0,a.Z)(G,p),ne=function(e){var t=(0,o.Z)({},j);e.forEach((function(e,r){var n,o,a,l,i,c,u,d,s=e.type,v=e.roomType,y=!(null===(n=e.data)||void 0===n||!n.length)&&e.data.every((function(e){return null===e||void 0===e?void 0:e.retailShortStay})),f=!(null===(o=e.data)||void 0===o||!o.length)&&e.data.every((function(e){return null===e||void 0===e?void 0:e.retailLongStay})),h=!(null===(a=e.data)||void 0===a||!a.length)&&e.data.every((function(e){return null===e||void 0===e?void 0:e.corporateShortStay})),p=!(null===(l=e.data)||void 0===l||!l.length)&&e.data.every((function(e){return null===e||void 0===e?void 0:e.corporateLongStay}));null!==t&&void 0!==t&&null!==(i=t[s])&&void 0!==i&&i[v.toLowerCase()]&&(t[s][v.toLowerCase()].retailShortStay=Boolean(y)),null!==t&&void 0!==t&&null!==(c=t[s])&&void 0!==c&&c[v.toLowerCase()]&&(t[s][v.toLowerCase()].retailLongStay=Boolean(f)),null!==t&&void 0!==t&&null!==(u=t[s])&&void 0!==u&&u[v.toLowerCase()]&&(t[s][v.toLowerCase()].corporateShortStay=Boolean(h)),null!==t&&void 0!==t&&null!==(d=t[s])&&void 0!==d&&d[v.toLowerCase()]&&(t[s][v.toLowerCase()].corporateLongStay=Boolean(p))})),z(t)},oe=function(e){var t=(0,o.Z)({},Z);e.forEach((function(e,r){var n;t[null===e||void 0===e?void 0:e.type][null===e||void 0===e?void 0:e.bsgp]=!1;var o=[];e.retailLongStay&&o.push("retailLongStay"),e.retailShortStay&&o.push("retailShortStay"),e.corporateLongStay&&o.push("corporateLongStay"),e.corporateShortStay&&o.push("corporateShortStay"),null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length&&null!==o&&void 0!==o&&o.length&&(t[null===e||void 0===e?void 0:e.type][null===e||void 0===e?void 0:e.bsgp]=o.every((function(t){return e.data.every((function(e){return e[t]}))})))})),L(t)},ae=(0,i.useCallback)((function(e,t,r,n,o,a){M({tabValue:e,index:r,activeTabLabel:k,id:n,parentIndex:o,field:a}),setTimeout((function(){return $("form")}),0)}),[k]),le=(0,u.Dq)({control:Q,name:"form"}).fields;(0,i.useEffect)((function(){null===V||void 0===V||V(J)}),[J]);var ie=te("form"),ce=function(e){var t=(0,o.Z)({},Y);for(var r in t[b][k])t[b][k][r]=e;z(t),ie.forEach((function(t,r){t.bsgp===k&&t.type===b&&t.data.forEach((function(t,n){K("form.".concat(r,".data.").concat(n,".retailLongStay"),e),K("form.".concat(r,".data.").concat(n,".retailShortStay"),e),K("form.".concat(r,".data.").concat(n,".corporateLongStay"),e),K("form.".concat(r,".data.").concat(n,".corporateShortStay"),e)}))})),setTimeout((function(){return $("form")}),0);var n=function(e){var t=document.getElementsByName(e);t&&t[0]&&(t[0].indeterminate=!1)};n("retailLongStay"),n("retailShortStay"),n("corporateLongStay"),n("corporateShortStay")},ue=(0,i.useCallback)((function(){var e;void 0!==(null===P||void 0===P?void 0:P.parentIndex)&&(null===(e=_.current[P.parentIndex])||void 0===e||e.handleRowDelete(P.index));if(P.id){var t,r,a;(0,f.deleteServicesAmenities)({id:P.id}),N(P.id);var i=null===ie||void 0===ie||null===(t=ie.find)||void 0===t||null===(r=t.call(ie,(function(e){return(null===e||void 0===e?void 0:e.bsgp)===(null===P||void 0===P?void 0:P.activeTabLabel)&&(null===e||void 0===e?void 0:e.type)===(null===P||void 0===P?void 0:P.tabValue)})))||void 0===r?void 0:r.data;if(null!==i&&void 0!==i&&i.length&&null!==Y&&void 0!==Y&&null!==(a=Y[b])&&void 0!==a&&a[k]){var c=[];Object.entries(Y[b][k]).map((function(e){var t=(0,l.Z)(e,2),r=t[0],n=t[1],o=null===i||void 0===i?void 0:i.filter((function(e){var t;return!(null===e||void 0===e||null===(t=e.hasOwnProperty)||void 0===t||!t.call(e,r)||(null===e||void 0===e?void 0:e._id)==(null===P||void 0===P?void 0:P.id))&&(c.push(r),!0)}));Y[b][k][r]=null!==o&&void 0!==o&&o.length?o.every((function(e){return Boolean(null===e||void 0===e?void 0:e[r])})):n})),null!==c&&void 0!==c&&c.length&&(Z[b][k]=c.every((function(e){return Boolean(Y[b][k][e])})),L(Z)),z(Y)}}var u=ie.find((function(e){return(null===e||void 0===e?void 0:e.bsgp)===k&&(null===e||void 0===e?void 0:e.type)===b}));if(u){var d,s=["corporateLongStay","corporateShortStay","retailLongStay","retailShortStay"].filter((function(e){return u[e]})),v=(0,o.Z)({},Y);null!==u&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.length&&(s.forEach((function(e){var t,r;v[b][k][e]=null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.every((function(t){return t[e]}));var n=document.getElementsByName(e);v[b][k][e]||null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&r.every((function(t){return!t[e]}))?null!==n&&void 0!==n&&n[0]&&(n[0].indeterminate=!1):null!==n&&void 0!==n&&n[0]&&(n[0].indeterminate=!0)})),z((0,o.Z)({},v)),L((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,n.Z)({},b,(0,o.Z)((0,o.Z)({},e[b]),{},(0,n.Z)({},k,s.every((function(e){return v[b][k][e]}))))))})))}de()}),[P]),de=(0,i.useCallback)((function(){M(null)}),[]);(0,i.useImperativeHandle)(t,(function(){return{methods:{handleSubmit:ee,reset:re.reset,unregister:re.unregister,setValue:K,watch:te},setChecked:ce,prefillCheckbox:ne,prefillSelectAll:oe}}));return(0,h.jsxs)("div",{className:d.default.tableWrap,children:[le.map((function(e,t){var r,a,l=e.bsgp===k&&e.type===b;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(c.Z,{className:"".concat(d.default.table," ").concat(l?"":"d-none"),children:[(0,h.jsx)("thead",{children:(0,h.jsx)("tr",{children:null===g||void 0===g||null===(r=g[b])||void 0===r?void 0:r.map((function(t,r){var a,l,i="retailLongStay"===(null===t||void 0===t?void 0:t.key)&&(null===e||void 0===e?void 0:e.retailLongStay)||"retailShortStay"===(null===t||void 0===t?void 0:t.key)&&(null===e||void 0===e?void 0:e.retailShortStay)||"corporateShortStay"===(null===t||void 0===t?void 0:t.key)&&(null===e||void 0===e?void 0:e.corporateShortStay)||"corporateLongStay"===(null===t||void 0===t?void 0:t.key)&&(null===e||void 0===e?void 0:e.corporateLongStay);return"retailLongStay"!==(null===t||void 0===t?void 0:t.key)&&"retailShortStay"!==(null===t||void 0===t?void 0:t.key)&&"corporateShortStay"!==(null===t||void 0===t?void 0:t.key)&&"corporateLongStay"!==(null===t||void 0===t?void 0:t.key)?(0,h.jsx)("th",{children:(0,h.jsx)("div",{className:d.default.wrapth,children:t.label})},null===t||void 0===t?void 0:t.key):i?(0,h.jsx)("th",{children:(0,h.jsxs)("div",{className:d.default.wrapth,children:[!D&&(0,h.jsx)(s.default,{customClass:d.default.checkbox,onChange:function(e){return function(e,t,r){var a=e.target.checked;ie.forEach((function(e,r){e.type===b&&e.bsgp===k&&e.data.forEach((function(e,n){K("form.".concat(r,".data.").concat(n,".").concat(t.key),a)}))})),$("form");var l=(0,o.Z)({},Y);l[b][k][t.key]=!l[b][k][t.key],z((0,o.Z)({},l)),L(a?function(e){var t,r,a=ie.find((function(e){return(null===e||void 0===e?void 0:e.bsgp)===k&&(null===e||void 0===e?void 0:e.type)===b})),i=(0,o.Z)((0,o.Z)({},e),{},(0,n.Z)({},b,(0,o.Z)((0,o.Z)({},e[b]),{},(0,n.Z)({},k,null===(t=Object.values(null===l||void 0===l||null===(r=l[b])||void 0===r?void 0:r[k]))||void 0===t?void 0:t.every((function(e){return e}))))));if(a){var c=["corporateLongStay","corporateShortStay","retailLongStay","retailShortStay"].filter((function(e){return a[e]}));i[b][k]=c.every((function(e){return l[b][k][e]}))}return i}:function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,n.Z)({},b,(0,o.Z)((0,o.Z)({},e[b]),{},(0,n.Z)({},k,!1))))})}(e,t)},isChecked:null===Y||void 0===Y||null===(a=Y[b])||void 0===a||null===(l=a[k])||void 0===l?void 0:l[t.key],name:t.key}),t.label]})},t.key):void 0}))})}),(0,h.jsx)("tbody",{className:"".concat(l?"":"d-none"),children:(0,h.jsx)(v.default,{ref:function(e){return _.current[t]=e},tabValue:b,handleDelete:ae,tab:k,setCommonSelectAll:L,setSelectAll:z,selectAll:Y,control:Q,register:X,trigger:$,setValue:K,errors:H,restMethods:re,index:t,commonSelectAll:Z,watch:te,roomTypeId:null===e||void 0===e?void 0:e.roomTypeId,propertyId:null===e||void 0===e?void 0:e.propertyId,frequencyList:A,triggerAppend:E,setTriggerAppend:T,retailLongStay:(null===e||void 0===e?void 0:e.retailLongStay)||!1,retailShortStay:(null===e||void 0===e?void 0:e.retailShortStay)||!1,corporateShortStay:(null===e||void 0===e?void 0:e.corporateShortStay)||!1,corporateLongStay:(null===e||void 0===e?void 0:e.corporateLongStay)||!1,setFrequencyList:R,saveDraft:q,showPreview:D})})]},e.id),l&&0==(null===(a=te("form.".concat(t,".data")))||void 0===a?void 0:a.length)&&(0,h.jsx)("div",{className:"d-flex justify-content-center w-100",children:"No Data found"})]})})),P&&(0,h.jsx)(y.default,{description:"Are you sure you want to delete the frequency type ".concat(null!==P&&void 0!==P&&null!==(r=P.field)&&void 0!==r&&r.frequency?"\u201c".concat((null===P||void 0===P||null===(S=P.field)||void 0===S?void 0:S.frequency)||"","\u201d"):""," for ").concat((null===P||void 0===P||null===(m=P.field)||void 0===m?void 0:m.name)||""," ").concat("services"===(null===P||void 0===P?void 0:P.tabValue)?"Service":"Amenity","?"),handleDelete:ue,handleClose:de,visible:!0})]})}));S.displayName="ServiceTable",t.default=S;var g={services:[{key:"service",label:"Service"},{key:"frequency",label:"Frequency"},{key:"chargingType",label:"Charging Type"},{key:"rate",label:"Rate (\u20b9)"},{key:"retailShortStay",label:"Retail Short Stay",showCheckbox:!0,selectAll:!1},{key:"retailLongStay",label:"Retail Long Stay",showCheckbox:!0,selectAll:!1},{key:"corporateShortStay",label:"Corporate Short Stay",showCheckbox:!0,selectAll:!1},{key:"corporateLongStay",label:"Corporate Long Stay",showCheckbox:!0,selectAll:!1},{key:"action",label:""}],amenities:[{key:"amenities",label:"Amenity"},{key:"frequency",label:"Frequency"},{key:"chargingType",label:"Charging Type"},{key:"rate",label:"Rate (\u20b9)"},{key:"retailShortStay",label:"Retail Short Stay",showCheckbox:!0},{key:"retailLongStay",label:"Retail Long Stay",showCheckbox:!0},{key:"corporateShortStay",label:"Corporate Short Stay",showCheckbox:!0},{key:"corporateLongStay",label:"Corporate Long Stay",showCheckbox:!0},{key:"action",label:""}]}},71632:function(e,t,r){r.r(t),r.d(t,{addFrequency:function(){return u},addServicesAmenities:function(){return s},deleteServicesAmenities:function(){return v},getFrequencies:function(){return c},getRoomType:function(){return y},listServiceAmenity:function(){return d}});var n=r(74165),o=r(15861),a=r(31243),l=r(73395),i=r(93151),c=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"get",url:l.endpoints.serviceAmenity.GET_FREQUENCY_LIST,headers:{}}).catch(i.default);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"post",url:l.endpoints.serviceAmenity.ADD_FREQUENCY,headers:{},data:t}).catch(i.default);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"get",url:l.endpoints.serviceAmenity.SERVICES_AMENITIES,headers:{},params:t}).catch(i.default);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t,r){var o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:r?"put":"post",url:l.endpoints.serviceAmenity.SERVICES_AMENITIES,headers:{},data:t}).catch(i.default);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"post",url:l.endpoints.serviceAmenity.SERVICES_AMENITIES,headers:{},params:t}).catch(i.default);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"get",url:l.endpoints.serviceAmenity.GET_ROOM_TYPE+"/".concat(t),headers:{}}).catch(i.default);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},62591:function(e,t,r){var n=r(1413),o=r(45987),a=r(81694),l=r.n(a),i=r(72791),c=r(10162),u=r(80184),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],s=i.forwardRef((function(e,t){var r=e.bsPrefix,a=e.className,i=e.striped,s=e.bordered,v=e.borderless,y=e.hover,f=e.size,h=e.variant,p=e.responsive,S=(0,o.Z)(e,d),g=(0,c.vE)(r,"table"),m=l()(a,g,h&&"".concat(g,"-").concat(h),f&&"".concat(g,"-").concat(f),i&&"".concat(g,"-").concat("string"===typeof i?"striped-".concat(i):"striped"),s&&"".concat(g,"-bordered"),v&&"".concat(g,"-borderless"),y&&"".concat(g,"-hover")),b=(0,u.jsx)("table",(0,n.Z)((0,n.Z)({},S),{},{className:m,ref:t}));if(p){var k="".concat(g,"-responsive");return"string"===typeof p&&(k="".concat(k,"-").concat(p)),(0,u.jsx)("div",{className:k,children:b})}return b}));t.Z=s}}]);
//# sourceMappingURL=2940.90a86626.chunk.js.map